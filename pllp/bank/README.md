# Задача "Как ограбить банк?"
[Условие](https://proglib.io/p/zadacha-o-vzlome-bankovskogo-zamka-s-semyu-rychazhkami-2020-02-12)
на сайте [ProgLib](https://proglib.io).

## Копия условия
Медвежатник спланировал колоссальное ограбление.
Последней преградой на пути похитителя стал необычный сейфовый замок.
На его поверхности ряд из 7 одинаковых двухпозиционных (вкл/выкл) механических тумблеров.

Секрет замка таков:
1. Крайний правый переключатель может быть включен или выключен независимо от других.
2. Состояние любого другого тумблера можно изменить
   только когда ближайший сосед справа включен,
   а все остальные правые тумблеры (если таковые есть) выключены.
3. За один раз можно поменять положение только одного переключателя.

Замок открывается, когда все рычаги находятся в выключенном состоянии.
Но исходно все включены. За какое минимальное количество переключений тумблеров
медвежатник, узнавший секрет замка, его откроет?

## UI Модель и решение
[bank.html](./bank.html)

## Вывод общей формулы
Пусть у нас есть `n` тумблеров в положении "вкл", и мы ищем
`f(n)` - минимальное число шагов,
за которое можно перевести их все в положение "выкл".

Обозначим состояние "выкл" как `0`, а состояние "вкл" - за `1`.
Тогда начальное состояние для `n` тумблеров будет выглядеть так:
`11..1`

Найдём `f(1)`. На старте имеем состояние `1`,
и можем за одно действие (по правилу 1) перевести его в `0`.
Т.е. `f(1) = 1`.

Найдём `f(2)`. Для этого выпишем решение по шагам.
В скобках будем указывать применяемое правило и номер тумблера,
к которому мы его применяем (самый левый - номер 0).
```
0) 11 (2, 0)
1) 01 (1, 1)
2) 00
```
`f(2) = 2`

Не трудно понять, что т.к. любое действие обратимо,
то перевести `n` тумблеров из положения `00..0` в `11..1`
тоже потребует минимум `f(n)` действий.

Найдём `f(n)` при `n > 2`.
В случае сведения задачи к аналогичной, но с меньшим числом тумблеров `m < n`,
будем писать в скобках `f(m)`. Знак `|` (pipe) будем использовать как разделитель.
```
0) 11|11..1 (f(n-2))
1) 11|00..0 (2, 1)
2) 01|00..0 (f(n-2))
3) 01|11..1 (f(n-1))
4) 00|00..0
```
В строке 2, чтобы приблизиться к решению (т.е. переключить тумблер 1),
необходимо установить тумблер 2 в значение 1 (а все с большими номерами в 0).
Чтобы переключить тумблер 2, нужно (аналогично) сначала установить в 1 тумблер 3.
А чтобы переключить тумблер `k` (`2 <= k < n`),
нужно сначала установить в 1 тумблер `k + 1`,
т.е. полностью обратить преобразование из строки 0 в строку 1.

Т.о. при `n > 2`, `f(n) = f(n-1) + 2*f(n-2) + 1`.

